# Franka Cube Stacking - Konfiguration
# =====================================

# Simulation
simulation:
  headless: True                    # True für schnellere Datensammlung (ohne GUI)
  seed: 111
  world_root: "/World"

# Parallelisierung
parallel:
  num_envs: 10                     # 1 = Single, >1 = Parallel (z.B. 4 für 2x2 Grid)
  env_spacing: 2.5                  # Abstand zwischen Umgebungen (Meter)

# Datensammlung
dataset:
  num_episodes: 50                  # Anzahl zu sammelnder Episoden (TOTAL)
  # path: "E:/00_Coding_SSD/fcs_datasets" 
  path: "/home/tsp_jw/Desktop/fcs_datasets"
  # path: "/media/tsp_jw/fc8bca1b-cab8-4522-81d0-06172d2beae8/fcs_datasets"
  name: "NEps50_ActInt10_RobOpac10_NCams1_NCube1"
  save_png: true                    # Speichere alle Bilder auch als PNG
  action_mode: "ee_pos"             # Action-Codierung:
                                    #   "delta_pose": [dx, dy, dz, d_yaw] - relative Positionsänderung (4D)
                                    #   "velocity":   [vx, vy, vz, omega_z] - Geschwindigkeiten (4D)
                                    #   "ee_pos":     [x_s, y_s, z_s, x_e, y_e, z_e] - EE Start/End Position (6D, wie DINO WM)
  action_interval: 10               # Frames pro Action (wie Rope-Format):
                                    #   1 = jeder Frame wird gespeichert
                                    #   10 = alle 10 Frames wird eine Action/H5 gespeichert
                                    #   Die Action beschreibt dann die Bewegung über N Frames

# Kamera
camera:
  position: [1.6, -2.0, 1.27]       # SIDE_CAM_BASE_POS
  euler: [66.0, 0.0, 32.05]         # Roll, Pitch, Yaw in Grad
  frequency: 20
  resolution: [224, 224]            # Breite x Höhe
  robot_opacity_for_capture: 1.0    # Roboter-Opazität für Bildaufnahme (0.0 - 1.0)
                                    # 1.0 = Voll sichtbar (opak)
                                    # 0.5 = Halbtransparent (50%)
                                    # 0.0 = Komplett unsichtbar (wie Referenz-Datensatz)

# Szene
scene:
  width: 0.60                       # SCENE_WIDTH (Meter)
  length: 0.75                      # SCENE_LENGTH (Meter)
  plane_lift: 0.001                 # Ebene leicht über Boden

controller:
  trajectory_resolution: 1.0        # TRAJECTORY_RESOLUTION
  air_speed_multiplier: 1.0                # Speed up AIR phases only (0,4,5,8,9)
  height_adaptive_speed: False              # DYNAMIC: Slow down near ground!
  critical_height_threshold: 0.1           # Below xx m = critical zone
  critical_speed_factor: 0.5               # slower in critical zone

  # DEFAULT_EVENTS_DT: [0.008, 0.005, 1, 0.1, 0.05, 0.05, 0.0025, 1, 0.008, 0.08]
  air_dt: 1.0
  critical_dt: 0.015
  wait_dt: 1.0
  grip_dt: 0.2
  release_dt: 0.2

  # Guaranteed Final Position: Ensures EE reaches exact pick/place height
  # even with large dt values. Adds 1 extra step per critical phase.
  guarantee_final_position: true
  guarantee_phases: [1, 6]            # Phases where t=1.0 must be reached
                                      # Phase 1: lower to pick, Phase 6: lower to place

  # Phase Overview (for understanding speed parameters):
  #   ---------------------------------------------------
  #   Phase 0: Move EE above cube at initial height     [AIR - can be fast]
  #   Phase 1: Lower EE down to cube                    [CRITICAL - must be precise]
  #   Phase 2: Wait for inertia to settle               [WAIT]
  #   Phase 3: Close gripper                            [GRIP]
  #   Phase 4: Lift EE up with cube                     [AIR - can be fast]
  #   Phase 5: Move EE toward target XY                 [AIR - can be fast]
  #   Phase 6: Lower EE to place cube                   [CRITICAL - must be precise]
  #   Phase 7: Open gripper                             [RELEASE]
  #   Phase 8: Lift EE up                               [AIR - can be fast]
  #   Phase 9: Return EE to starting position           [AIR - can be fast]

# Würfel
cubes:
  count: 1                          # N_CUBES
  side: 0.05                        # Kantenlänge (Meter)
  min_dist_factor: 1.5              # MIN_DIST = factor * CUBE_SIDE
  max_placement_tries: 200          # MAX_TRIES für Positionierung
  yaw_range: [-45.0, 45.0]          # Rotation Range in Grad (reduziert wegen EE-Rotation)

# Franka Roboter Workspace
robot:
  base_clearance: 0.3               # FRANKA_BASE_CLEARANCE
  max_reach: 0.75                   # Maximale Reichweite (konservativ, echte: ~0.855m)
  min_reach: 0.3                    # Minimale Reichweite (zu nah = Selbstkollision)

# Validierung
validation:
  xy_tolerance: 0.03                # Toleranz für X/Y Position (3 cm)
  z_min_height: 0.02                # Mindesthöhe über Boden (2 cm)
  z_stack_tolerance: 0.02           # Toleranz für Z-Stacking

# Materialien für Domain Randomization
materials:
  - name: "AllowedArea_Steel_Brushed"
    rgba: [0.62, 0.62, 0.62, 1.00]
  - name: "AllowedArea_Aluminum_Mill"
    rgba: [0.77, 0.77, 0.78, 1.00]
  - name: "AllowedArea_Wood_Oak"
    rgba: [0.65, 0.53, 0.36, 1.00]
  - name: "AllowedArea_Wood_BirchPly"
    rgba: [0.85, 0.74, 0.54, 1.00]
  - name: "AllowedArea_Plastic_HDPE_Black"
    rgba: [0.08, 0.08, 0.08, 1.00]
  - name: "AllowedArea_Rubber_Mat"
    rgba: [0.12, 0.12, 0.12, 1.00]
  - name: "AllowedArea_Acrylic_Frosted"
    rgba: [1.00, 1.00, 1.00, 1.00]

